<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Writing a face detection function for OpenFaaS | Matias Pan's blog</title>
<meta name=keywords content="go,gocv,openfaas,serverless"><meta name=description content="There is a new term in town that has been making its way to all of us for a couple of years now: Serverless. When I first heard this I was kind of confused as to what it meant. Everybody seemed to have an opinion about it but there were no real answers. The following definition from serverless-stack helped me clarify a bit:
Serverless computing (or serverless for short), is an execution model where the cloud provider is responsible for executing a piece of code by dynamically allocating the resources."><meta name=author content="Me"><link rel=canonical href=https://blog.matiaspan.dev/posts/writing-a-face-detection-function-for-openfaas/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://blog.matiaspan.dev/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://blog.matiaspan.dev/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://blog.matiaspan.dev/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://blog.matiaspan.dev/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://blog.matiaspan.dev/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Writing a face detection function for OpenFaaS"><meta property="og:description" content="There is a new term in town that has been making its way to all of us for a couple of years now: Serverless. When I first heard this I was kind of confused as to what it meant. Everybody seemed to have an opinion about it but there were no real answers. The following definition from serverless-stack helped me clarify a bit:
Serverless computing (or serverless for short), is an execution model where the cloud provider is responsible for executing a piece of code by dynamically allocating the resources."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.matiaspan.dev/posts/writing-a-face-detection-function-for-openfaas/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-03-16T00:00:00-03:00"><meta property="article:modified_time" content="2019-03-16T00:00:00-03:00"><meta property="og:site_name" content="Matias Pan's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Writing a face detection function for OpenFaaS"><meta name=twitter:description content="There is a new term in town that has been making its way to all of us for a couple of years now: Serverless. When I first heard this I was kind of confused as to what it meant. Everybody seemed to have an opinion about it but there were no real answers. The following definition from serverless-stack helped me clarify a bit:
Serverless computing (or serverless for short), is an execution model where the cloud provider is responsible for executing a piece of code by dynamically allocating the resources."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.matiaspan.dev/posts/"},{"@type":"ListItem","position":2,"name":"Writing a face detection function for OpenFaaS","item":"https://blog.matiaspan.dev/posts/writing-a-face-detection-function-for-openfaas/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Writing a face detection function for OpenFaaS","name":"Writing a face detection function for OpenFaaS","description":"There is a new term in town that has been making its way to all of us for a couple of years now: Serverless. When I first heard this I was kind of confused as to what it meant. Everybody seemed to have an opinion about it but there were no real answers. The following definition from serverless-stack helped me clarify a bit:\nServerless computing (or serverless for short), is an execution model where the cloud provider is responsible for executing a piece of code by dynamically allocating the resources.","keywords":["go","gocv","openfaas","serverless"],"articleBody":"There is a new term in town that has been making its way to all of us for a couple of years now: Serverless. When I first heard this I was kind of confused as to what it meant. Everybody seemed to have an opinion about it but there were no real answers. The following definition from serverless-stack helped me clarify a bit:\nServerless computing (or serverless for short), is an execution model where the cloud provider is responsible for executing a piece of code by dynamically allocating the resources. And only charging for the amount of resources used to run the code.\nIt also claims the following:\nWhile serverless abstracts the underlying infrastructure away from the developer, servers are still involved in executing our functions.\nEssentially we want to write our code without worrying where it will be executed, how it will be scaled and how it will exposed to the rest of the world. This talk by Kelsey Hightower does an amazing job in showing off what serverless is all about.\nIn this post I’ll go through how to implement our own Serverless function using OpenFaaS. We are going to create a small program that receives an image or a URL and returns the same image with all the faces marked with a green rectangle. We’ll do this using OpenCV and a neural network.\nPrerequisites For this tutorial I will be using GCP’s (Google Cloud Platform) managed Kubernetes service called GKE to deploy OpenFaaS and the face detection program will be built using Go and GoCV. So be sure you meet with the following requirements:\nGo installed on your machine. If you want to test the program locally you’ll either need to install GoCV or use one of their available docker images. A Kubernetes cluster with kubectl set up. If you want you can use GCP’s 300USD free credit. We won’t be using much of it. You can follow this tutorial to set it up. You can use Minikube for this if you prefer to test it all locally. I haven’t actually followed that blog post so I’m not sure if it’s still working. OpenFaaS We already said that while serverless abstracts the underlying infrastructure from your code that doesn’t mean there is no infrastructure behind. There are tools that different cloud providers have such as Google’s Cloud Functions, Microsoft’s Azure Functions and AWS Lambda that allow us to write our serverless functions. But today we are going to be looking at one called OpenFaaS.\nOpenFaaS is a platform that tries to Make Serverless Functions Simple (and it does that very well). It can run on top of something like Kubernetes, Docker Swarm, Fargate and others. It makes life easier for developers and operators because of its ease of use and amazing CLI. Check out the documentation. It’s very extensive and has all the information you’ll need.\nBefore we start writing any code, let’s get it up and running with OpenFaaS. Since you already have a Kubernetes cluster, follow this tutorial to deploy it using helm. Once you have it up and running install the faas-cli on your machine and authenticate to your OpenFaaS installation.\nFunctions and templates All functions in OpenFaaS belong to a template. There are many templates for different languages and tools already provided. But if none of those meet your needs, it is very easy to create a new one. This is what we’ll be doing in this article.\nWriting our function To perform the face detection we are going to use GoCV and a pre-trained Caffe neural network. This means that our function needs to have OpenCV installed and the model+config files of the neural network. We could use the dockerfile template and install our dependencies there, but I like the idea of having a gocv template with built-in models for anyone who wants to make use of it. Here is the template I created in case you want to check it out.\nLet’s start writing our function! The users will provide the image they want to perform the face detection on as a URL. The function will:\nDo a GET request to that URL and check if it’s an image and if the image is of the supported content types (jpg, jpeg and png). If it’s not then we simply return an error. If it is valid we need to: decode the image, run a pass through the neural network, draw rectangles around all of the faces that were found, encode the image and return the results. The code to do the detection was extracted from this example of GoCV. I had to make a few minor changes to parse the downloaded image and encode it before returning it, but the important parts are the same. Download the function’s code from Github and let’s deploy it using the faas cli. Once you’ve downloaded the function go to the stack.yml file and change the following fields:\nprovider \u003e gateway: set your openfaas gateway URL functions \u003e face-finder \u003e image: change matipan for your own docker hub username. Now we simply have to deploy the function, this is as simple as running: faas up. This command will build the image, push it to the docker registry and deploy it on openfaas. Once the function is deployed head over to the OpenFaaS dashboard and select your face-finder function. Provide a URL(like this one) to an image then select the Download option and hit invoke. This should download an image onto your machine, if it all worked it should be something like this:\nPretty neat, right?\nIf you are interested in getting into details on how this was implemented you can check out the function/handler.go file. It is less than 100 lines of code and is quite straightforward.\nIf you have any questions feel free to contact me on Twitter!\n","wordCount":"974","inLanguage":"en","datePublished":"2019-03-16T00:00:00-03:00","dateModified":"2019-03-16T00:00:00-03:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.matiaspan.dev/posts/writing-a-face-detection-function-for-openfaas/"},"publisher":{"@type":"Organization","name":"Matias Pan's blog","logo":{"@type":"ImageObject","url":"https://blog.matiaspan.dev/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.matiaspan.dev/ accesskey=h title="Home (Alt + H)"><img src=https://blog.matiaspan.dev/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.matiaspan.dev/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.matiaspan.dev/search/ title=Search><span>Search</span></a></li><li><a href=https://blog.matiaspan.dev/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://blog.matiaspan.dev/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Writing a face detection function for OpenFaaS</h1><div class=post-meta><span title='2019-03-16 00:00:00 -0300 -03'>March 16, 2019</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/matipan/matipan.github.io/tree/main/content/posts/writing-a-face-detection-function-for-openfaas.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#openfaas>OpenFaaS</a><ul><li><a href=#functions-and-templates>Functions and templates</a></li><li><a href=#writing-our-function>Writing our function</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>There is a new term in town that has been making its way to all of us for a couple of years now: <em>Serverless</em>. When I first heard this I was kind of confused as to what it meant. Everybody seemed to have an opinion about it but there were no real answers. The following definition from <a href=https://serverless-stack.com/chapters/what-is-serverless.html>serverless-stack</a> helped me clarify a bit:</p><blockquote><p>Serverless computing (or serverless for short), is an execution model where the cloud provider is responsible for executing a piece of code by dynamically allocating the resources. And only charging for the amount of resources used to run the code.</p></blockquote><p>It also claims the following:</p><blockquote><p>While serverless abstracts the underlying infrastructure away from the developer, servers are still involved in executing our functions.</p></blockquote><p>Essentially we want to write our code without worrying where it will be executed, how it will be scaled and how it will exposed to the rest of the world. <a href="https://www.youtube.com/watch?v=oNa3xK2GFKY">This talk</a> by <a href=https://twitter.com/kelseyhightower>Kelsey Hightower</a> does an amazing job in showing off what serverless is all about.</p><p>In this post I&rsquo;ll go through how to implement our own Serverless function using OpenFaaS. We are going to create a small program that receives an image or a URL and returns the same image with all the faces marked with a green rectangle. We&rsquo;ll do this using OpenCV and a neural network.</p><h2 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>#</a></h2><p>For this tutorial I will be using GCP&rsquo;s (Google Cloud Platform) managed Kubernetes service called GKE to deploy OpenFaaS and the face detection program will be built using Go and GoCV. So be sure you meet with the following requirements:</p><ul><li>Go installed on your machine. If you want to test the program locally you&rsquo;ll either need to install GoCV or use one of their available <a href=https://github.com/denismakogon/gocv-alpine>docker images</a>.</li><li>A Kubernetes cluster with kubectl set up. If you want you can use GCP&rsquo;s 300USD free credit. We won&rsquo;t be using much of it. You can follow <a href=https://cloud.google.com/kubernetes-engine/docs/quickstart>this tutorial</a> to set it up. You can use <a href=https://medium.com/@lizrice/getting-started-with-openfaas-on-minikube-8d51987f5bbb>Minikube</a> for this if you prefer to test it all locally. I haven&rsquo;t actually followed that blog post so I&rsquo;m not sure if it&rsquo;s still working.</li></ul><h2 id=openfaas>OpenFaaS<a hidden class=anchor aria-hidden=true href=#openfaas>#</a></h2><p>We already said that while serverless abstracts the underlying infrastructure from your code that doesn&rsquo;t mean there is no infrastructure behind. There are tools that different cloud providers have such as <a href=https://cloud.google.com/functions/>Google&rsquo;s Cloud Functions</a>, <a href=https://azure.microsoft.com/en-us/services/functions/>Microsoft&rsquo;s Azure Functions</a> and <a href=https://aws.amazon.com/lambda/>AWS Lambda</a> that allow us to write our serverless functions. But today we are going to be looking at one called <a href=https://openfaas.com>OpenFaaS</a>.</p><p>OpenFaaS is a platform that tries to <em>Make Serverless Functions Simple</em> (and it does that very well). It can run on top of something like Kubernetes, Docker Swarm, Fargate and others. It makes life easier for developers and operators because of its ease of use and amazing CLI. Check out the <a href=https://docs.openfaas.com/>documentation</a>. It&rsquo;s very extensive and has all the information you&rsquo;ll need.</p><p>Before we start writing any code, let&rsquo;s get it up and running with OpenFaaS. Since you already have a Kubernetes cluster, follow <a href=https://github.com/openfaas/faas-netes/blob/master/HELM.md>this tutorial</a> to deploy it using helm. Once you have it up and running install the <a href=https://github.com/openfaas/faas-netes/blob/master/chart/openfaas/README.md#verify-the-installation>faas-cli</a> on your machine and <a href=https://github.com/openfaas/faas-cli#get-started-install-the-cli>authenticate to your OpenFaaS installation</a>.</p><h3 id=functions-and-templates>Functions and templates<a hidden class=anchor aria-hidden=true href=#functions-and-templates>#</a></h3><p>All functions in OpenFaaS belong to a <a href=https://github.com/openfaas/templates>template</a>. There are many <a href=https://github.com/openfaas/templates>templates for different languages and tools</a> already provided. But if none of those meet your needs, it is very easy to create a new one. This is what we&rsquo;ll be doing in this article.</p><h3 id=writing-our-function>Writing our function<a hidden class=anchor aria-hidden=true href=#writing-our-function>#</a></h3><p>To perform the face detection we are going to use GoCV and a pre-trained Caffe neural network. This means that our function needs to have OpenCV installed and the model+config files of the neural network. We could use the <a href=https://github.com/openfaas/templates/tree/master/template/dockerfile>dockerfile template</a> and install our dependencies there, but I like the idea of having a <em>gocv template</em> with built-in models for anyone who wants to make use of it.
<a href=https://github.com/matipan/openfaas-gocv-template/>Here</a> is the template I created in case you want to check it out.</p><p>Let&rsquo;s start writing our function! The users will provide the image they want to perform the face detection on as a URL. The function will:</p><ul><li>Do a GET request to that URL and check if it&rsquo;s an image and if the image is of the supported content types (jpg, jpeg and png).</li><li>If it&rsquo;s not then we simply return an error.</li><li>If it is valid we need to:<ol><li>decode the image,</li><li>run a pass through the neural network,</li><li>draw rectangles around all of the faces that were found,</li><li>encode the image and return the results.</li></ol></li></ul><p>The code to do the detection was extracted from <a href=https://github.com/hybridgroup/gocv/blob/master/cmd/dnn-detection/main.go>this example</a> of GoCV. I had to make a few minor changes to parse the downloaded image and encode it before returning it, but the important parts are the same.
Download the function&rsquo;s code from <a href=https://github.com/matipan/openfaas-face-finder>Github</a> and let&rsquo;s deploy it using the faas cli.
Once you&rsquo;ve downloaded the function go to the <code>stack.yml</code> file and change the following fields:</p><ul><li><code>provider > gateway</code>: set your openfaas gateway URL</li><li><code>functions > face-finder > image</code>: change <code>matipan</code> for your own docker hub username.</li></ul><p>Now we simply have to deploy the function, this is as simple as running: <code>faas up</code>. This command will build the image, push it to the docker registry and deploy it on openfaas. Once the function is deployed head over to the OpenFaaS dashboard and select your face-finder function. Provide a URL(<a href=http://dujye7n3e5wjl.cloudfront.net/photographs/1080-tall/time-100-influential-photos-ellen-degeneres-oscars-selfie-100.jpg>like this one</a>) to an image then select the <em>Download</em> option and hit invoke. This should download an image onto your machine, if it all worked it should be something like this:</p><p><img loading=lazy src=https://raw.githubusercontent.com/matipan/openfaas-face-finder/master/doc/result.jpg alt="Image with all the faces marked by a green rectangle"></p><p>Pretty neat, right?</p><p>If you are interested in getting into details on how this was implemented you can check out the <code>function/handler.go</code> file. It is less than 100 lines of code and is quite straightforward.</p><p>If you have any questions feel free to contact me on <a href=https://twitter.com/matiaspan26>Twitter</a>!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.matiaspan.dev/tags/go/>go</a></li><li><a href=https://blog.matiaspan.dev/tags/gocv/>gocv</a></li><li><a href=https://blog.matiaspan.dev/tags/openfaas/>openfaas</a></li><li><a href=https://blog.matiaspan.dev/tags/serverless/>serverless</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Writing a face detection function for OpenFaaS on x" href="https://x.com/intent/tweet/?text=Writing%20a%20face%20detection%20function%20for%20OpenFaaS&amp;url=https%3a%2f%2fblog.matiaspan.dev%2fposts%2fwriting-a-face-detection-function-for-openfaas%2f&amp;hashtags=go%2cgocv%2copenfaas%2cserverless"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Writing a face detection function for OpenFaaS on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.matiaspan.dev%2fposts%2fwriting-a-face-detection-function-for-openfaas%2f&amp;title=Writing%20a%20face%20detection%20function%20for%20OpenFaaS&amp;summary=Writing%20a%20face%20detection%20function%20for%20OpenFaaS&amp;source=https%3a%2f%2fblog.matiaspan.dev%2fposts%2fwriting-a-face-detection-function-for-openfaas%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Writing a face detection function for OpenFaaS on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.matiaspan.dev%2fposts%2fwriting-a-face-detection-function-for-openfaas%2f&title=Writing%20a%20face%20detection%20function%20for%20OpenFaaS"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Writing a face detection function for OpenFaaS on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.matiaspan.dev%2fposts%2fwriting-a-face-detection-function-for-openfaas%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Writing a face detection function for OpenFaaS on whatsapp" href="https://api.whatsapp.com/send?text=Writing%20a%20face%20detection%20function%20for%20OpenFaaS%20-%20https%3a%2f%2fblog.matiaspan.dev%2fposts%2fwriting-a-face-detection-function-for-openfaas%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Writing a face detection function for OpenFaaS on telegram" href="https://telegram.me/share/url?text=Writing%20a%20face%20detection%20function%20for%20OpenFaaS&amp;url=https%3a%2f%2fblog.matiaspan.dev%2fposts%2fwriting-a-face-detection-function-for-openfaas%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Writing a face detection function for OpenFaaS on ycombinator" href="https://news.ycombinator.com/submitlink?t=Writing%20a%20face%20detection%20function%20for%20OpenFaaS&u=https%3a%2f%2fblog.matiaspan.dev%2fposts%2fwriting-a-face-detection-function-for-openfaas%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.matiaspan.dev/>Matias Pan's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>